<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="bower/jquery/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="static/css/public.css" />

    <!--codemirror-->
    <link rel="stylesheet" href="bower/codemirror/lib/codemirror.css"/>
    <script src="bower/codemirror/lib/codemirror.js"></script>
    <script src="bower/codemirror/mode/php/php.js"></script>

    <!--highlight-->
    <link rel="stylesheet" href="bower/highlightjs/styles/default.css">
    <script src="bower/highlightjs/highlight.pack.js"></script>
</head>
<body>
    <form id="form">
        <div class="gray_border"><textarea id="code" name="code"></textarea></div><br/>
        <input type="button" onclick="run()" value="RUN" style="width:100px;font-size: 25px;" />
        <div id="view" class="gray_border hidden">
        </div>
    </form>

    <div>
        <pre><code class="php">
            echo 1;
            echo 2;
            print_r('hello');
        </code></pre>
    </div>

    <script>
    function run() {
        params = {'code':window.editor.getValue()};

        $.post('/run.php', params, function(data) {
            console.log(data);
            $("#view").html("<pre>" + data.result + "</pre>");
            $("#view").removeClass("hidden");
        }, 'json');
    }
    </script>

    <script type="text/javascript">
        var mime="text/x-php";
        window.editor = CodeMirror.fromTextArea(document.getElementById('code'), {
            mode: mime,
            indentWithTabs: true,
            smartIndent: true,
            lineNumbers: true,
            matchBrackets : true,
            autofocus: true
        });


        $(document).ready(function() {
            $('pre code').each(function(i, block) {
                hljs.highlightBlock(block);
            });
        });



    </script>

</body>
</html>

